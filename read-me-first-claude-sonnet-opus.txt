Retro Runner V.082 - System Overview
Architektur & Hauptkomponenten
ğŸ—ï¸ Core Architecture

Modular ES6 System: Saubere Trennung in core/, rendering/, systems/
Fixed 60 FPS Game Loop: gameState.js mit deltaTime-Normalisierung
Entity-Component Pattern: Zentrale Arrays fÃ¼r obstacles, bullets, effects
Real-time Rendering Pipeline: Depth-sorted rendering mit Y-ordering

ğŸ® Core Game Systems
GameState Management (core/gameState.js)

Central game state object mit lives, score, level, buffs
Resume transition system fÃ¼r smooth gameplay
FPS-normalisierte Updates mit deltaTime
State transitions: START â†’ PLAYING â†’ PAUSED â†’ LEVEL_COMPLETE â†’ GAME_OVER

Player System (core/player.js)

CORRUPTION MECHANIC: isCorrupted blockiert jumping/shooting
Multi-jump system: ground â†’ double (shadowLeap) â†’ triple (jumpBoost)
Facing direction tracking fÃ¼r rendering
Hold-jump mechanics mit variable HÃ¶he

Camera System (core/camera.js)

Dead zone scrolling (44% screen width)
Forward-only movement (camera.maxX tracking)
Screen coordinate conversion

Input System (core/input.js)

Key state tracking: W/â†‘(jump), A/D/â†/â†’(move), S/Space(shoot), ESC(pause)
Direct gameState integration

ğŸ¯ Combat & Entity System
Entity Management (entities.js)

Arrays: obstacles, bulletsFired, drops, batProjectiles, effects
Spawn System: Level-based enemy distribution mit spawn timers
Collision System: Enhanced mit shield-priority damage handling
Alpha Wolf Fury System: Health-triggered leap attacks mit target prediction

Enemy Types & Behavior
ğŸ¦‡ Bat: Omnidirektional spit attacks, player following
ğŸº Wolf/Alpha: Ground movement, fury leap attacks  
ğŸ•·ï¸ Spider: Fast ground, multi-hit
ğŸ§Ÿ Vampire: Slow, high health, floating
ğŸ’€ Skeleton: Basic ground enemy
âš¡ Tesla Coil: Ceiling-mounted, chargeâ†’zapâ†’cooldown cycle
ğŸ§ª Frankenstein: Lab table, upward lightning bolts
ğŸ—¿ Sarcophagus: Static obstacle mit glowing eyes
ğŸ“¦ Bolt Box: Ammo pickup
Drop System

Boss drops (50%): extraLife, megaBullets, speedBoost, jumpBoost
Rare drops (1% base): shield, scoreMultiplier, magnetMode, berserkerMode, ghostWalk, timeSlow
Combo-based drop chance bonuses

ğŸ¨ Rendering Pipeline (rendering/)
Renderer (renderer.js)

3-Layer Depth Sorting:

Background: rocks, boltBoxes (static Y-sort)
Dynamic: player + enemies (real-time Y-sort)
Foreground: tesla/frankenstein (always on top)


Bullets render above everything
Effects render last

Specialized Renderers

Player (player.js): Multi-effect glow system (shield, corruption, berserker)
Enemies (enemies.js): Type-specific animations, health bars, state machines
Effects (effects.js): Particles, explosions, bat projectiles mit trails

ğŸµ Audio & UI Systems
Sound Manager (systems.js)

Web Audio API fÃ¼r SFX
Background music mit auto-resume
Volume controls mit smooth transitions

Enhanced UI (ui-enhancements.js)

Combo Display: Bottom center, subtle styling, glow integration
Buff Display: Bottom left, stack management, timers
Stats Overlay: TAB-triggered performance metrics
Achievement Popups: Animated notifications

Volume Overlay System

Game auto-pause bei volume settings
Smooth resume mit countdown
Master mute functionality

âš¡ Enhanced Damage System (enhanced-damage-system.js)
Visual Feedback Components

GlowManager: Container glow effects (combo, damage, shield, corruption)
Screen Shake: Physics-based camera shake
Critical Health Overlay: Vignette effect at 1 life
Audio Enhancement: Layered damage sounds

Integration Points

Triggers von collision system
Combo system integration
Health state monitoring

ğŸ† Progression & Persistence
Achievement System

firstBlood, untouchable, sharpshooter, speedDemon
Permanent gameplay modifiers
localStorage persistence

Highscore System

Local: localStorage backup
Global: Pantry API mit validation
Security: File-based banned words, score legitimacy checks, rate limiting

Buff System

Permanent (every 2 levels): chainLightning, undeadResilience, shadowLeap
Temporary (drops): Stacking timers, multiple effects
Visual Integration: Enhanced UI display

ğŸ”§ Configuration & Constants
Game Balance (constants.js)

Enemy spawn chances by level
Drop configurations mit duration/chances
Physics constants (gravity, jump strength, speeds)
Theme definitions (Dungeon theme active)

Spawn Logic

Level-scaled enemy distribution
Timer-based spawn prevention
Boss chance scaling (2% â†’ 15%)
Special hazard ratios (Tesla 60%, Frankenstein 40%)

ğŸ® Game Flow Patterns

Startup: Theme application â†’ camera reset â†’ entity initialization
Gameplay Loop: Entity updates â†’ collision detection â†’ rendering â†’ UI updates
Level Progression: Every 2 levels â†’ buff selection â†’ speed increase
Damage Flow: Collision â†’ shield check â†’ damage application â†’ feedback effects
Death: Game over â†’ score validation â†’ highscore submission â†’ restart option

ğŸ” Key Integration Points

gameState as central hub fÃ¼r all systems
Enhanced displays update every 500ms
Damage effects integrate mit collision system
Sound system coordinates mit game state changes
Rendering depth managed durch Y-coordinate sorting
Input handling directly modifies game state
Persistence systems coordinate save/load operations

Dieses System ist modular aufgebaut mit klaren Verantwortlichkeiten, aber starker Integration zwischen den Komponenten fÃ¼r smooth gameplay experience.